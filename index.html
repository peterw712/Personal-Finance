        10.</p>

        <button id="optimizeButton">Optimize</button>
    </div>

    <div id="results">
        <h2>Optimal allocation:</h2>
        <p>Savings: $<span id="savingsResult"></span></p>
        <p>Investments: $<span id="investmentResult"></span></p>
        <p>Discretionary Expenses: $<span id="discretionaryResult"></span></p>
    </div>

    <script>
        document.getElementById("optimizeButton").onclick = function () {
            const income = parseFloat(document.getElementById("income").value);
            const fixed_expenses = parseFloat(document.getElementById("fixed_expenses").value);
            const min_savings_goal = parseFloat(document.getElementById("min_savings_goal").value);
            const min_investment_goal = parseFloat(document.getElementById("min_investment_goal").value);
            const discretionary_expense_limit = parseFloat(document.getElementById("discretionary_expense_limit").value);
            const net_worth = parseFloat(document.getElementById("net_worth").value);
            const rating_savings = parseInt(document.getElementById("rating_savings").value);
            const rating_investments = parseInt(document.getElementById("rating_investments").value);
            const rating_discretionary_expenses = parseInt(document.getElementById("rating_discretionary_expenses").value);

            if (rating_savings + rating_investments + rating_discretionary_expenses !== 10) {
                document.getElementById("ratingError").style.display = "block";
                return;
            } else {
                document.getElementById("ratingError").style.display = "none";
            }

            const total_weight = rating_savings + rating_investments + rating_discretionary_expenses;
            const weights = [
                rating_savings / total_weight,
                rating_investments / total_weight,
                rating_discretionary_expenses / total_weight
            ];

            const optimal_allocation = optimize_personal_finances(income, fixed_expenses, min_savings_goal, min_investment_goal, discretionary_expense_limit, net_worth, weights);

            document.getElementById("savingsResult").innerText = optimal_allocation[0].toFixed(2);
            document.getElementById("investmentResult").innerText = optimal_allocation[1].toFixed(2);
            document.getElementById("discretionaryResult").innerText = optimal_allocation[2].toFixed(2);
            document.getElementById("results").style.display = "block";
        };

        function optimize_personal_finances(income, fixed_expenses, min_savings_goal, min_investment_goal, discretionary_expense_limit, net_worth, weights) {
            const net_worth_fraction = 0.01;
            const total_income = income + net_worth_fraction * net_worth;

            const savings_fraction = Math.max(min_savings_goal / total_income, weights[0]);
            const investment_fraction = Math.max(min_investment_goal / total_income, weights[1]);
            const discretionary_fraction = Math.min(discretionary_expense_limit / total_income, weights[2]);

            const total_fraction = savings_fraction + investment_fraction + discretionary_fraction;

            const optimal_savings = (savings_fraction / total_fraction) * (total_income - fixed_expenses);
            const optimal_investments = (investment_fraction / total_fraction) * (total_income - fixed_expenses);
            const optimal_discretionary_expenses = (discretionary_fraction / total_fraction) * (total_income - fixed_expenses);

            return [optimal_savings, optimal_investments, optimal_discretionary_expenses];
        }
    </script>
</body>
</html>
